{"mappings":"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","sources":["src/index.js"],"sourcesContent":["import * as L from 'leaflet';\nimport maplibregl from 'maplibre-gl';\n\nconst MapLibreGL = L.Layer.extend({\n  options: {\n    updateInterval: 32,\n    // How much to extend the overlay view (relative to map size)\n    // e.g. 0.1 would be 10% of map view in each direction\n    padding: 0.1,\n    // whether or not to register the mouse and keyboard\n    // events on the maplibre overlay\n    interactive: false,\n    // set the tilepane as the default pane to draw gl tiles\n    pane: 'tilePane',\n  },\n\n  initialize: function (options) {\n    L.setOptions(this, options);\n    // setup throttling the update event when panning\n    this._throttledUpdate = L.Util.throttle(this._update, this.options.updateInterval, this);\n  },\n\n  onAdd: function (map) {\n    if (!this._container) {\n      this._initContainer();\n    }\n\n    const paneName = this.getPaneName();\n    map.getPane(paneName).appendChild(this._container);\n\n    this._initGL();\n\n    this._offset = this._map.containerPointToLayerPoint([0, 0]);\n\n    // work around https://github.com/mapbox/mapbox-gl-leaflet/issues/47\n    if (map.options.zoomAnimation) {\n      L.DomEvent.on(map._proxy, L.DomUtil.TRANSITION_END, this._transitionEnd, this);\n    }\n  },\n\n  onRemove: function (map) {\n    if (this._map._proxy && this._map.options.zoomAnimation) {\n      L.DomEvent.off(this._map._proxy, L.DomUtil.TRANSITION_END, this._transitionEnd, this);\n    }\n    const paneName = this.getPaneName();\n    map.getPane(paneName).removeChild(this._container);\n\n    this._glMap.remove();\n    this._glMap = null;\n  },\n\n  getEvents: function () {\n    return {\n      move: this._throttledUpdate, // sensibly throttle updating while panning\n      zoomanim: this._animateZoom, // applys the zoom animation to the <canvas>\n      zoom: this._pinchZoom, // animate every zoom event for smoother pinch-zooming\n      zoomstart: this._zoomStart, // flag starting a zoom to disable panning\n      zoomend: this._zoomEnd,\n      resize: this._resize,\n    };\n  },\n\n  getMaplibreMap: function () {\n    return this._glMap;\n  },\n\n  getCanvas: function () {\n    return this._glMap.getCanvas();\n  },\n\n  getSize: function () {\n    return this._map.getSize().multiplyBy(1 + this.options.padding * 2);\n  },\n\n  getBounds: function () {\n    const halfSize = this.getSize().multiplyBy(0.5);\n    const center = this._map.latLngToContainerPoint(this._map.getCenter());\n    return L.latLngBounds(\n      this._map.containerPointToLatLng(center.subtract(halfSize)),\n      this._map.containerPointToLatLng(center.add(halfSize)),\n    );\n  },\n\n  getContainer: function () {\n    return this._container;\n  },\n\n  // returns the pane name set in options if it is a valid pane, defaults to tilePane\n  getPaneName: function () {\n    return this._map.getPane(this.options.pane) ? this.options.pane : 'tilePane';\n  },\n\n  _initContainer: function () {\n    const container = L.DomUtil.create('div', 'leaflet-gl-layer');\n\n    const size = this.getSize();\n    const offset = this._map.getSize().multiplyBy(this.options.padding);\n    container.style.width = `${size.x}px`;\n    container.style.height = `${size.y}px`;\n    this._container = container;\n\n    const topLeft = this._map.containerPointToLayerPoint([0, 0]).subtract(offset);\n    L.DomUtil.setPosition(container, topLeft);\n  },\n\n  _initGL: function () {\n    const center = this._map.getCenter();\n\n    const options = L.extend({}, this.options, {\n      container: this._container,\n      center: [center.lng, center.lat],\n      zoom: this._map.getZoom() - 1,\n      attributionControl: false,\n    });\n\n    this._glMap = new maplibregl.Map(options);\n\n    // allow GL base map to pan beyond min/max latitudes\n    this._glMap.transform.latRange = null;\n    this._glMap.transform.maxValidLatitude = Infinity;\n\n    this._transformGL(this._glMap);\n\n    if (this._glMap._canvas.canvas) {\n      // older versions of mapbox-gl surfaced the canvas differently\n      this._glMap._actualCanvas = this._glMap._canvas.canvas;\n    } else {\n      this._glMap._actualCanvas = this._glMap._canvas;\n    }\n\n    // treat child <canvas> element like L.ImageOverlay\n    const canvas = this._glMap._actualCanvas;\n    L.DomUtil.addClass(canvas, 'leaflet-image-layer');\n    L.DomUtil.addClass(canvas, 'leaflet-zoom-animated');\n    if (this.options.interactive) {\n      L.DomUtil.addClass(canvas, 'leaflet-interactive');\n    }\n    if (this.options.className) {\n      L.DomUtil.addClass(canvas, this.options.className);\n    }\n  },\n\n  _update: function () {\n    // update the offset so we can correct for it later when we zoom\n    this._offset = this._map.containerPointToLayerPoint([0, 0]);\n\n    if (this._zooming) {\n      return;\n    }\n\n    const size = this.getSize();\n    const container = this._container;\n    const gl = this._glMap;\n    const offset = this._map.getSize().multiplyBy(this.options.padding);\n    const topLeft = this._map.containerPointToLayerPoint([0, 0]).subtract(offset);\n\n    L.DomUtil.setPosition(container, topLeft);\n\n    this._transformGL(gl);\n\n    if (gl.transform.width !== size.x || gl.transform.height !== size.y) {\n      container.style.width = `${size.x}px`;\n      container.style.height = `${size.y}px`;\n      if (gl._resize !== null && gl._resize !== undefined) {\n        gl._resize();\n      } else {\n        gl.resize();\n      }\n    } else if (gl._update !== null && gl._update !== undefined) {\n      gl._update();\n    } else {\n      gl.update();\n    }\n  },\n\n  _transformGL: function (gl) {\n    const center = this._map.getCenter();\n\n    // gl.setView([center.lat, center.lng], this._map.getZoom() - 1, 0);\n    // calling setView directly causes sync issues because it uses requestAnimFrame\n\n    const tr = gl.transform;\n    tr.center = maplibregl.LngLat.convert([center.lng, center.lat]);\n    tr.zoom = this._map.getZoom() - 1;\n  },\n\n  // update the map constantly during a pinch zoom\n  _pinchZoom: function () {\n    this._glMap.jumpTo({\n      zoom: this._map.getZoom() - 1,\n      center: this._map.getCenter(),\n    });\n  },\n\n  // borrowed from L.ImageOverlay\n  // https://github.com/Leaflet/Leaflet/blob/master/src/layer/ImageOverlay.js#L139-L144\n  _animateZoom: function (e) {\n    const scale = this._map.getZoomScale(e.zoom);\n    const padding = this._map.getSize().multiplyBy(this.options.padding * scale);\n    const viewHalf = this.getSize()._divideBy(2);\n    // corrections for padding (scaled), adapted from\n    // https://github.com/Leaflet/Leaflet/blob/master/src/map/Map.js#L1490-L1508\n    const topLeft = this._map\n      .project(e.center, e.zoom)\n      ._subtract(viewHalf)\n      ._add(this._map._getMapPanePos().add(padding))\n      ._round();\n    const offset = this._map\n      .project(this._map.getBounds().getNorthWest(), e.zoom)\n      ._subtract(topLeft);\n\n    L.DomUtil.setTransform(this._glMap._actualCanvas, offset.subtract(this._offset), scale);\n  },\n\n  _zoomStart: function () {\n    this._zooming = true;\n  },\n\n  _zoomEnd: function () {\n    const scale = this._map.getZoomScale(this._map.getZoom());\n\n    L.DomUtil.setTransform(\n      this._glMap._actualCanvas,\n      // https://github.com/mapbox/mapbox-gl-leaflet/pull/130\n      null,\n      scale,\n    );\n\n    this._zooming = false;\n\n    this._update();\n  },\n\n  _transitionEnd: function () {\n    L.Util.requestAnimFrame(function () {\n      const zoom = this._map.getZoom();\n      const center = this._map.getCenter();\n      const offset = this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());\n\n      // reset the scale and offset\n      L.DomUtil.setTransform(this._glMap._actualCanvas, offset, 1);\n\n      // enable panning once the gl map is ready again\n      this._glMap.once(\n        'moveend',\n        L.Util.bind(function () {\n          this._zoomEnd();\n        }, this),\n      );\n\n      // update the map position\n      this._glMap.jumpTo({\n        center: center,\n        zoom: zoom - 1,\n      });\n    }, this);\n  },\n\n  _resize: function (e) {\n    this._transitionEnd(e);\n  },\n});\n\nexport default MapLibreGL;\n"],"names":[],"version":3,"file":"main.js.map"}